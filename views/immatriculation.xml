<odoo>
  <data>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="immatriculation.list">
      <field name="name">immatriculation list</field>
      <field name="model">immatriculation.fiscale</field>
      <field name="arch" type="xml">
        <list>
          <field name="nom_commercial"/>
          <field name="adresse_ets"/>
          <field name="tel_fixe"/>
          <field name="bp"/>
          <field name="nif"/>
        </list>
      </field>
    </record>

 <record id="view_immatriculation_fiscale_form" model="ir.ui.view">
        <field name="name">immatriculation.fiscale.form</field>
        <field name="model">immatriculation.fiscale</field>
        <field name="arch" type="xml">
            <form string="Immatriculation Fiscale">
                <sheet>
                    <!-- Étape 1 : Type d'Entité -->
                    <group string="Type de Contribuable" colspan="2">
                       
                       <group>
                        <field name="type_contribuable" widget="radio" required="1"/>
                       </group> 
                        <group>
                        <field name="name" required="1" />
                       </group> 
                    </group>

                    <!-- Dispositions Générales (hors notebook) -->
                    <group string="Dispositions Générales" colspan="2">
                        <group>
                            <field name="nom_commercial"/>
                            <field name="adresse_ets"/>
                            <field name="tel_fixe"/>
                            <field name="bp"/>
                            <field name="regime_fiscale_id" widget="many2one_tags"/>
                        </group>
                        <group>
                            <field name="tel"/>
                            <field name="mail_general"/>
                            <field name="nombre_salaries"/>
                            <field name="date_immatriculation"/>
                            <field name="centre_impot_id" widget="many2one_tags"/>
                        </group>
                    </group>

                    <!-- Notebook pour toutes les autres sections -->
                    <notebook>
                        <!-- Onglet  Physique -->
                        <page string="Informations Personnelle">
                            <group colspan="2">
                                <group>
                                    <field name="nom_prenom"/>
                                    <field name="sexe"/>
                                    <field name="cin_carte_sejour"/>
                                    <field name="nationalite"/>
                                </group>
                                <group>
                                    <field name="date_naissance"/>
                                    <field name="domicile_personnel"/>
                                </group>
                            </group>
                        </page>

                        <!-- Onglet Personne Morale -->
                        <page string="Personne Morale">
                            <group string="Identité de la Personne Morale" colspan="2">
                                <group>
                                    <field name="denomination_sociale"/>
                                    <field name="forme_juridique"/>
                                    <field name="capital_social"/>
                                    <field name="duree_societe"/>
                                </group>
                                <group>
                                    <field name="nombre_associes"/>
                                    <field name="commissaire_comptes"/>
                                    <field name="activite_raison_sociale"/>
                                </group>
                            </group>

                            <!-- Sous-section Personne morale / Succursale -->
                            <group string="Spécificités de la Succursale" colspan="2">
                                <group>
                                    <field name="societe_etrangere_proprietaire"/>
                                    <field name="siege_social_etranger"/>
                                </group>
                                <group>
                                    <field name="forme_juridique_etrangere"/>
                                    <field name="nationalite_societe_etrangere"/>
                                </group>
                            </group>
                        </page>

                         <!-- Onglet  Activites -->
                        <page string="Les Activités">
                            <group colspan="2"> 
                                <group>
                                    <field name="activite_ids" />
                                </group>
                            </group>  
                        </page>

                         <!-- Onglet  Salarier -->
                        <page string="Les Salariés">
                            <group string="Identification des Salariers" colspan="2">
                               
                                <group>
                                  <field name="salarier_ids" mode="kanban"/>
                                    
                                </group>
                            </group>
                        </page>

                        <!-- Onglet Mandataire -->
                        <page string="Mandataire/Commissaire">
                            <group string="Identification du Mandataire/Commissaire" colspan="2" >
                                <group>
                                    <field name="mandataire_id" mode="kanban"/>
                                </group>
                            </group>
                        </page>

                        <!-- Onglet Contacts -->
                        <page string="Représentant Légal et Contacts">
                            <group string="Contacts" colspan="2">
                                <group>
                                    <field name="contact_id" mode="kanban"/>
                                </group>
                            </group>
                        </page>

                        <!-- Onglet Salariés -->
                        <!-- <page string="Salariés">
                            <group string="Déclaration des Salariés" colspan="4">
                                <field name="salarie_ids" mode="tree,form">
                                    <tree editable="bottom">
                                        <field name="nom_prenom_salarie"/>
                                        <field name="salaire_brut"/>
                                        <field name="date_embauche"/>
                                        <field name="emploi_occupe"/>
                                        <field name="matricule_cnss"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <field name="nom_prenom_salarie"/>
                                            <field name="salaire_brut"/>
                                            <field name="date_embauche"/>
                                            <field name="emploi_occupe"/>
                                            <field name="matricule_cnss"/>
                                        </group>
                                    </form>
                                </field>
                            </group>
                        </page> -->

                        <!-- Onglet Pièces Jointes -->
                        <page string="Pièces Jointes">
                            <group string="Pièces à Joindre (Communes)" colspan="4">
                                <field name="copie_cin_passport" filename="copie_cin_passport_filename"/>
                                <field name="pouvoir_mandataire" filename="pouvoir_mandataire_filename"/>
                                <field name="agrement_activite" filename="agrement_activite_filename"/>
                                <field name="contrat_bail" filename="contrat_bail_filename"/>
                                <field name="lettre_engagement" filename="lettre_engagement_filename"/>
                            </group>

                            <!-- Pièces Personne Morale -->
                            <group string="Pièces Spécifiques Personne Morale" colspan="4" >
                                <field name="attestations_bancaires" filename="attestations_bancaires_filename"/>
                                <field name="statuts_societe" filename="statuts_societe_filename"/>
                            </group>

                            <!-- Pièces Succursale -->
                            <group string="Pièces Spécifiques Succursale" colspan="4">
                                <field name="statuts_societe_etrangere" filename="statuts_societe_etrangere_filename"/>
                                <field name="traduction_statuts_etranger" filename="traduction_statuts_etranger_filename"/>
                                <field name="rcs_societe_etrangere" filename="rcs_societe_etrangere_filename"/>
                                <field name="traduction_rcs_etranger" filename="traduction_rcs_etranger_filename"/>
                                <field name="decision_creation_succursale" filename="decision_creation_succursale_filename"/>
                            </group>
                        </page>

                        <!-- Onglet Signature -->
                        <page string="Signature">
                            <group string="Signature" colspan="4">
                                <field name="signature_gerant" filename="signature_gerant_filename"/>
                                <field name="declaration_honneur"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

  
    <!-- actions opening views on models -->
    <record model="ir.actions.act_window" id="action_immatriculation_fiscale_tree">
        <field name="name">Contribuable</field>
        <field name="res_model">immatriculation.fiscale</field>
        <field name="view_mode">list,form,kanban,pivot,graph</field>
    </record>
    
    <menuitem name="Lister Contribuable" id="immatriculation_tree" action="action_immatriculation_fiscale_tree" parent="immatriculation_menu" sequence="4"/>
   
  </data>
</odoo>
